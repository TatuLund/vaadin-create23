'use strict';window.org_vaadin_tatu_vaadincreate_components_ChartAccessibilityExtension=function(){function q(b){let e=b.querySelector("div");if(!e)return null;let g=e.querySelector("svg");return g?{chartElement:b,wrapperDiv:e,svg:g}:null}function r(b,e){let g=q(b);if(g){var l=g.svg,m=g.chartElement;try{let f=l.querySelector("desc"),h;null==f||null==(h=f.parentNode)||h.removeChild(f);l.querySelectorAll(".highcharts-legend-item").forEach(a=>{a.hasAttribute("data-accessibility-patched")||(a.setAttribute("tabindex",
"0"),a.setAttribute("role","button"),a.setAttribute("aria-label",e+" "+a.textContent),a.toggleAttribute("data-accessibility-patched"),a.addEventListener("keyup",c=>{if("Enter"===c.key||" "===c.key)c.preventDefault(),a.dispatchEvent(new CustomEvent("click"))}))});let d=0;l.querySelectorAll(".highcharts-button").forEach(a=>{if(!a.hasAttribute("data-accessibility-patched")){d++;let c="context-menu-"+(b.id||"")+"-"+d;a.setAttribute("tabindex","0");a.setAttribute("role","button");a.setAttribute("aria-haspopup",
"true");a.setAttribute("aria-controls",c);a.setAttribute("aria-label",n.contextMenu);a.getElementsByTagName("title")[0].textContent=n.contextMenu;a.toggleAttribute("data-accessibility-patched");a.addEventListener("keyup",k=>{if("Enter"===k.key||" "===k.key||"ArrowDown"===k.key)k.preventDefault(),a.dispatchEvent(new CustomEvent("click"))});a.addEventListener("click",()=>{t(a,c,m);a.setAttribute("aria-expanded","true")})}})}catch(f){console.error("ChartAccessibilityExtension: Error patching chart:",
b.id||"",f)}}}function p(b,e){b.style.display="none";e.focus();e.removeAttribute("aria-expanded");if(b=e.getElementsByTagName("rect")[0])b.setAttribute("fill","white"),b.setAttribute("stroke","none")}function t(b,e,g){function l(){m++;let f=g.querySelector(".highcharts-contextmenu");if(f&&"none"!==f.style.display){let d=f.children[0];if(d&&!d.hasAttribute("data-accessibility-patched")){d.setAttribute("tabindex","-1");d.setAttribute("role","menu");d.setAttribute("aria-label","Chart context menu");
d.setAttribute("id",e);d.toggleAttribute("data-accessibility-patched");var h=d.querySelectorAll("div");let a=0;h.forEach(c=>{c.innerText=n.menuEntries[a]||c.innerText;a++;c.setAttribute("tabindex","0");c.setAttribute("role","menuitem");c.addEventListener("keyup",k=>{if("Enter"===k.key||" "===k.key)k.preventDefault(),c.dispatchEvent(new CustomEvent("click"));"Escape"===k.key&&p(f,b)})});d.addEventListener("focusout",c=>{c.relatedTarget&&!d.contains(c.relatedTarget)&&p(f,b)});0<h.length&&h[0].focus()}else if(null==
d?0:d.hasAttribute("data-accessibility-patched"))h=d.querySelectorAll("div"),0<h.length&&h[0].focus()}else 10>m&&setTimeout(l,50)}let m=0;setTimeout(l,50)}function u(b){function e(){f++;r(b,g);f<l&&setTimeout(e,m)}let g=n.legendsClickable||"Click to toggle",l=n.maxAttempts||20,m=n.retryInterval||100,f=0;e()}let n=this.getState();this.applyPatches=()=>{u(this.chartElement)};this.onStateChange=()=>{this.chartElement=this.getElement(this.getParentId())}};
